//////////////////////////////////////////////////////////////////////

#include <cstdint>
#include <stdio.h>
#include "util.h"
#include "random.h"

//////////////////////////////////////////////////////////////////////

namespace
{
    Random default_rng(1);
}

//////////////////////////////////////////////////////////////////////

Random::Random(int start_seed) : seed(start_seed)
{
}

//////////////////////////////////////////////////////////////////////

int Random::next()
{
    seed = seed * 1103515245 + 12345;
    return (seed >> 16) & 0xffff;
}

//////////////////////////////////////////////////////////////////////

byte Random::next_byte()
{
    return (byte)next();
}

//////////////////////////////////////////////////////////////////////

bool Random::boolean()
{
    return next() > 32767;
}

//////////////////////////////////////////////////////////////////////

void srand(int s)
{
    default_rng.seed = s;
}

//////////////////////////////////////////////////////////////////////

int rand16()
{
    return default_rng.next();
}

//////////////////////////////////////////////////////////////////////

byte rand8()
{
    return default_rng.next();
}
